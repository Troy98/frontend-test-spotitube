<mat-card>
  <mat-card-title>
    Welcome to Spotitube
  </mat-card-title>
  <mat-card-content class="flex-container"
                   fxLayout="column">
    <mat-form-field class="flex-item">
      <input id="urlInput"
             matInput
             placeholder="Server URL"
             [(ngModel)]="serverUrl"
             pattern="http://[a-zA-Z0-9:/.\-]+"
             required>
      <mat-error>Please provide a server url, including the substring http://</mat-error>
    </mat-form-field>

    <mat-form-field class="flex-item">
      <input matInput
             placeholder="User"
             [(ngModel)]="user"
             required>
      <mat-error>Please provide an user</mat-error>
    </mat-form-field>

    <mat-form-field class="flex-item">
      <input type="password" matInput placeholder="Password" [(ngModel)]="password" required>
      <mat-error>Please provide a password</mat-error>
    </mat-form-field>
  </mat-card-content>

  <mat-card-actions align="end">
    <button mat-button [disabled]="!user || user.trim() === '' || !serverUrl || serverUrl.trim() === ''">
      Login
    </button>
  </mat-card-actions>
  <mat-card-actions align="end">
    <button [class]="'han-account'" mat-button
            (click)="hanLogin()"> Login met HAN-account
    </button>
    <button [class]="'han-account'" mat-button
            (click)="loginWithToken()"> Login met HAN-account
  </mat-card-actions>

  <script>
    println( "test")
    //check if accessToken is present in url
    const urlParams = new URLSearchParams(window.location.search);
    const accessToken = urlParams.get('access_token');
    if (accessToken) {
      //use loginWithToken() function if this if statement is true
      println("accessToken is present");

      () => {
        this.loginWithToken();
      }
    }
  </script>
</mat-card>
